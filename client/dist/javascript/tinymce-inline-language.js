tinymce.create("tinymce.plugins.tinymce_inline_language",{init:function(editor,url){var config=this.getConfig();if(void 0!==config.locales&&0!==config.locales.length){var currentLocale=this.getCookie("FluentLocale_CMS"),self=this;config.locales.forEach(function(locale){locale.code!=currentLocale&&editor.addButton("tinymce-inline-language-"+locale.code,{text:locale.title,title:editor.getLang("tinymce_inline_language.tooltip","Set language for current selection"),onclick:function(){self.setInlineLanguage(editor,locale.code)}})})}},setInlineLanguage:function(editor,code){if(void 0!==editor.selection){var textSelection=editor.selection.getContent();if(0<textSelection.length){var config=this.getConfig();if(void 0===config.locales||0===config.locales.length)return;var selectedLocale=!1;if(config.locales.forEach(function(locale){locale.code==code&&(selectedLocale=locale)}),!selectedLocale)return;var currentDir=editor.directionality,directionality="";selectedLocale.dir!=currentDir&&(directionality=' dir="'+selectedLocale.dir+'"');var node=editor.selection.getNode();if(node&&node.getAttribute("lang")){var inner=node.innerHTML;editor.dom.remove(node),editor.selection.setContent(inner)}else textSelection=textSelection.replace(/<span[^>]*lang=\".+\"[^>]*>([\s\S]*?)<\/span>/,"$1"),editor.selection.setContent('<span lang="'+selectedLocale.code+'" data-language="'+selectedLocale.title+'"'+directionality+">"+textSelection+"</span>")}}},getConfig:function(){if(window&&window.ss&&window.ss.config&&window.ss.config.sections){var config=window.ss.config.sections.find(function(next){return"SilverStripe\\Admin\\LeftAndMain"===next.name});if(config)return config.inlinelanguages||{}}return{}},getCookie:function(name){var v=document.cookie.match("(^|;) ?"+name+"=([^;]*)(;|$)");return v?v[2]:null}}),tinymce.PluginManager.add("tinymce_inline_language_plugin",tinymce.plugins.tinymce_inline_language);
//# sourceMappingURL=tinymce-inline-language.js.map
